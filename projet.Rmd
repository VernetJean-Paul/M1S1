---
title: "Projet"
author: "Jean-Paul"
date: "19/09/2019"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

```{r}
library(tidyverse)
tidy_anime <- readr::read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-04-23/tidy_anime.csv")
tidy_anime -> df
library(cowplot)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


# Projet R mardown

## Quels sont les vingt animés avec la plus forte popularité? 
### Montrez le sous forme de graphique                    "

```{r}
df %>%
  select(name, popularity, members) %>%
  distinct() %>%
  arrange(popularity) %>%
  slice(1:20) %>%
  ggplot(aes(reorder(name, -popularity), members, fill = name))+
  geom_col(show.legend = F)+
  coord_flip()+
  labs(title = "Classement des 20 animés les plus populaires",
       y = "Nombre de fans (en milliers)",
       x = "Nom de l'animé") -> c


df %>%
  select(name, popularity, score) %>%
  distinct() %>%
  arrange(popularity) %>%
  slice(1:20) %>%
  ggplot(aes(reorder(name, -popularity), score, fill = name))+
  geom_col(show.legend = F)+
  coord_flip()+
  labs(title = "Classement des 20 animés les plus populaires",
       y = "Note sur 10",
       x = "Nom de l'animé")  -> d

plot_grid(c,d)
````

# Quels sont les genres les plus populaires?
## Montrez le sous forme de graphique

```{r}
df %>%
  select(name, genre, members) %>%
  group_by(genre) %>%
  summarise( n = n()) %>%
  arrange(-n) %>%
  slice(1:20) %>%
  ggplot(aes(x = genre, y = n, fill = genre))+
  geom_col(show.legend = F)+
  coord_flip()+
  labs(title = "Classement des 20 genres les plus populaires",
       y = "Nombre de fans (en milliers)",
       x = "Type de genre")
````

# Quels sont les periodes d'apparition des 10 mangas les plus populaires dans le temps
## Montrez le sous forme de graphique

```{r}
df %>%
  select(rating, members) %>%
  distinct() %>%
  arrange(rating)%>%
  group_by(rating) %>%
  mutate(., n = mean(members)) %>%
  ggplot(aes(x = rating, y = n, fill = rating))+
  geom_col(show.legend = F)+
  coord_flip()+
  labs(title = "Classement des catégories de public",
       y = "Nombre de vues (en milliers)",
       x = "Public visé")
````





